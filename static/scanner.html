<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JRA Ticket Scanner</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- LIFF SDK -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body>
    <div class="container">
        <header class="app-header">
            <h1>馬券登録</h1>
            <a href="balance.html" class="link-balance">📊 収支表 &gt;</a>
        </header>

        <main>
            <!-- Mode 1: Photo Scan (Primary) -->
            <section id="upload-section" class="card action-card">
                <div class="icon-wrapper">📷</div>
                <h2>馬券を撮影して登録</h2>
                <p class="description">
                    スマホのカメラで馬券を撮影してください。<br>
                    <span class="highlight">※ズームして文字がくっきり写るように撮影すると成功率が上がります。</span>
                </p>
                <input type="file" id="file-input" accept="image/*" style="display:none;">
                <button id="select-file-btn" class="btn btn-primary btn-lg">
                    カメラを起動 / 写真を選択
                </button>
            </section>

            <!-- Mode 2: Manual (Secondary) -->
            <section id="manual-section" class="card collapsed">
                <div class="card-header" id="toggle-manual">
                    <h3>✍️ 手入力で登録</h3>
                    <span class="toggle-icon">▼</span>
                </div>
                <div id="manual-form" style="display:none;">
                    <div class="form-group">
                        <label>開催場所</label>
                        <select id="place" class="form-control">
                            <option value="05">東京</option>
                            <option value="06">中山</option>
                            <option value="08">京都</option>
                            <option value="09">阪神</option>
                            <option value="01">札幌</option>
                            <option value="02">函館</option>
                            <option value="03">福島</option>
                            <option value="04">新潟</option>
                            <option value="07">中京</option>
                            <option value="10">小倉</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>レース番号</label>
                        <select id="race-num" class="form-control">
                            <!-- JS fills 1-12 -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label>式別</label>
                        <select id="bet-type" class="form-control">
                            <option value="単勝">単勝</option>
                            <option value="複勝">複勝</option>
                            <option value="ワイド">ワイド</option>
                            <option value="馬連">馬連</option>
                            <option value="馬単">馬単</option>
                            <option value="3連複">3連複</option>
                            <option value="3連単">3連単</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>買い目 <small>(例: 1-2-3)</small></label>
                        <input type="text" id="buy-details" class="form-control" placeholder="1-2-3">
                    </div>

                    <div class="form-group">
                        <label>金額 <small>(円)</small></label>
                        <input type="number" id="amount" class="form-control" placeholder="100">
                    </div>

                    <button id="add-manual-btn" class="btn btn-secondary btn-block">手入力で追加</button>
                </div>
            </section>

            <!-- Result Area -->
            <div id="scan-result" class="card result-card" style="display:none;">
                <h3>解析結果</h3>
                <div id="parsed-data" class="result-content"></div>
                <!-- Buttons injected by JS -->
            </div>

            <div id="loading" class="overlay" style="display:none;">
                <div class="spinner"></div>
                <p>解析中...</p>
            </div>
        </main>
    </div>

    <script src="js/scanner.js"></script>
</body>

</html>